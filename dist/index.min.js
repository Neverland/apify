!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("babel-runtime/helpers/extends")):"function"==typeof define&&define.amd?define(["babel-runtime/helpers/extends"],t):e.aqua=t(e._extends)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={GET:"GET",POST:"POST",DELETE:"DELETE",PUT:"PUT"},n={silent:"x-silent",message:"x-message",timeout:"x-timeout"},r={credentials:"same-origin"},o={"x-silent":!1,"x-message":!0,"x-timeout":5e3},i={Accept:"application/json","Content-Type":"application/json"},s=e({},{timeout:5e3,xOptionEnum:n,headers:i,METHOD:t,X_OPTION_ENUM:n,credentials:r,dataType:"json"},o);module.exports=exports.default;var a=Object.freeze({default:s}),d=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"POST",n=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(o=e({},a,o),"json"!==o.dataType.toLocaleLowerCase())return Promise.reject(o.errorHanlder({success:!1,message:"Data type doesn't support!"}));r=JSON.stringify(r);var i=(void 0).silent,s=(void 0).message,u=(void 0).timeout;o=assign({},X_OPTION,o);var d=void 0;!1===o[i]&&(d=loading());var l=o[u],c=function(){d&&d.then(function(e){e.hideUi(),e.$destroy(!0)})},f=o[s];delete o[i],delete o[u],delete o[s];var m=assign({},{method:t},{headers:headers},{body:r},CREDENTIALS,o);return new Promise(function(e,t){var r=setTimeout(function(){return c(),!0===f&&dialog({type:"alert",head:!1,content:"网络不畅，请稍后重试"}).then(function(e){e.hideUi()}),t({errno:-2,erromsg:"network timeout!"})},l);return fetch(n,m).then(function(n){return c(),clearTimeout(r),200!==n.status?t(n):n.json().then(function(n){var r=n.errno,o=n.errmsg;return r>100?(f&&dialog({type:"alert",head:!1,content:n.errmsg}).then(function(e){e.hideUi()}),log.sendExc("错误码: "+r+" 错误信息: "+o),t(n)):r>0&&r<=100?(log.sendExc("错误码: "+r+" 错误信息: "+o),t(n)):e(n)})}).catch(function(e){return c(),e.status&&200!==e.status&&(log.sendDp("z_REQUEST_SERVER_ERROR"),!0===f)?(alert("网络不给力，请求失败了! \n 请刷新重试！"),t({errno:-1,errmsg:e.status})):t(e)})})},l={};return l.post=function(e,t,n){return d(POST,e,t,n)},l.get=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];u.isObject(t)&&!u.isEmpty(t)&&(t=queryString.stringify(t)),0!==t.length&&-1===e.indexOf("?")&&(e+="?"),e+=t;var r=assign({},{method:GET},n);return fetch(e,{param:r})},module.exports=exports.default,l});
//# sourceMappingURL=index.min.js.map